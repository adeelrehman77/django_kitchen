{% extends 'main/base.html' %}

{% block content %}
<div class="profile-container">
    <div class="notifications">
        <h2>Recent Notifications</h2>
        {% if notifications %}
            {% for notification in notifications %}
            <div class="notification {% if not notification.is_read %}unread{% endif %}">
                {{ notification.message }}
            </div>
            {% endfor %}
        {% else %}
            <p>No notifications</p>
        {% endif %}
    </div>

    <div class="subscriptions">
        <h2>Your Subscriptions</h2>
        {% if subscriptions %}
            {% for sub in subscriptions %}
            <div class="subscription">
                <h3>{{ sub.menu.name }}</h3>
                <p>From: {{ sub.start_date }} To: {{ sub.end_date }}</p>
                <p>Time slot: {{ sub.time_slot }}</p>
                
                <div class="delivery-status">
                    <h4>Delivery Status</h4>
                    {% for status in delivery_status %}
                        {% if status.subscription == sub %}
                        <div class="status-item">
                            {{ status.date }}: {{ status.get_status_display }}
                        </div>
                        {% endif %}
                    {% endfor %}
                </div>
            </div>
            {% endfor %}
        {% else %}
            <p>No active subscriptions</p>
        {% endif %}
    </div>
</div>
{% endblock %}